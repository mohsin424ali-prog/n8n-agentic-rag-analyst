# Privacy & Data Sovereignty Guide

## Overview

This system is designed with **privacy-first principles** for organizations that need to keep sensitive documents within their infrastructure.

## Current Privacy Profile

### üîí Data Sovereignty Score: 80%

| Component | Location | Privacy Level |
|-----------|----------|---------------|
| **Documents** | Local filesystem | ‚úÖ 100% Private |
| **Text Extraction** | n8n (local) | ‚úÖ 100% Private |
| **Embeddings** | Ollama (local) | ‚úÖ 100% Private |
| **Vector Storage** | Qdrant (self-hosted) | ‚úÖ 100% Private |
| **Query Processing** | n8n (local) | ‚úÖ 100% Private |
| **LLM Inference** | Groq API (cloud) | ‚ö†Ô∏è External |
| **Web Search** | SerpAPI (cloud) | ‚ö†Ô∏è External (Optional) |

## What Stays Local

### ‚úÖ Your Data That Never Leaves

1. **Original Documents**
   - PDFs in `/files/` and `/files/processed/`
   - Never transmitted externally

2. **Document Content**
   - Text extracted locally
   - Not sent to external services

3. **Vector Embeddings**
   - Generated by Ollama (local)
   - 768-dimension vectors
   - Never leave your server

4. **Vector Database**
   - Qdrant runs locally
   - All vectors stored on-premise

5. **Workflow Orchestration**
   - n8n runs on your server
   - Execution data stays local

## What Goes External

### ‚ö†Ô∏è Data That Leaves (By Default)

1. **LLM Inference (Groq API)**
   - **Sent**: User query + document chunks
   - **Returned**: Generated answer
   - **Provider**: Groq (Llama 3.3 70B)
   - **Impact**: Medium

2. **Web Search (SerpAPI) - Optional**
   - **Sent**: Search keywords only
   - **Provider**: SerpAPI
   - **Impact**: Low

## Achieving 100% Privacy

### Switch to Local LLM

Replace Groq with Ollama for **95-100% privacy**:

#### Steps:

1. **Install LLM in Ollama**
   ```bash
   ollama pull llama3.3:70b
   # OR smaller models
   ollama pull llama3.1:8b
   ```

2. **Update Query Agent Workflow**
   - Delete "Groq Chat Model" node
   - Add "Ollama Chat Model" node
   - Configure: `model: llama3.3:70b`
   - Reconnect to AI Agent

3. **Test**
   ```bash
   Upload document ‚Üí Ask question ‚Üí Verify response
   ```

**Result**: üéØ **95-100% data sovereignty**

### Disable Web Search

1. Open "Query Agent" workflow
2. Delete "Live_Web_Search" node
3. Save and activate

**Result**: Removes external API dependency

### Full Air-Gap Deployment

For maximum security:
- ‚úÖ Self-hosted n8n
- ‚úÖ Self-hosted Qdrant
- ‚úÖ Ollama local models
- ‚úÖ No external APIs
- ‚úÖ No internet required

**Result**: üîí **100% air-gapped**

## Data Flow Analysis

### Current (80% Private)

```
User ‚Üí n8n ‚Üí Ollama ‚Üí Qdrant ‚Üí [EXTERNAL] Groq ‚Üí User
                                      ‚Üë
                                Query + Chunks
```

### After Ollama Switch (100% Private)

```
User ‚Üí n8n ‚Üí Ollama (embeddings) ‚Üí Qdrant ‚Üí Ollama (LLM) ‚Üí User
                                                  ‚Üë
                                        All local, nothing external
```

## Compliance

### GDPR Compliance

| Requirement | Current | With Ollama |
|-------------|---------|-------------|
| **Data Minimization** | ‚úÖ | ‚úÖ |
| **Right to Erasure** | ‚ö†Ô∏è Groq logs | ‚úÖ Full control |
| **Data Localization** | ‚ö†Ô∏è US processing | ‚úÖ All local |

### HIPAA Compliance

**Current**: ‚ùå Not HIPAA compliant  
**With Ollama**: ‚úÖ Can be HIPAA compliant with proper configuration

## Hardware Requirements

### Minimum (Ollama 8B)
- **CPU**: 8 cores
- **RAM**: 16GB
- **Storage**: 50GB SSD

### Recommended (Ollama 70B)
- **CPU**: 16+ cores
- **RAM**: 64GB
- **Storage**: 100GB SSD
- **GPU**: NVIDIA 24GB+ VRAM

## Privacy Comparison

| Configuration | Privacy | Performance | Cost |
|---------------|---------|-------------|------|
| **Groq + SerpAPI** | 80% | ‚ö° Fast | üí∞ Low |
| **Groq only** | 80% | ‚ö° Fast | üí∞ Very Low |
| **Ollama 8B** | 95% | ‚öôÔ∏è Medium | üí∞ Free |
| **Ollama 70B** | 95% | üêå Slower | üí∞ Free |
| **Air-Gapped** | 100% | üêå Slower | üí∞ Free |

## Best Practices

1. **Use Ollama** for sensitive data
2. **Disable web search** if not needed
3. **Enable encryption** at rest and in transit
4. **Regular backups** of Qdrant data
5. **Access controls** on n8n webhooks
6. **Audit logging** for compliance

## Questions & Answers

**Q: Can I use this with medical records?**  
A: Yes, but **only with Ollama** and proper HIPAA controls.

**Q: Does n8n send telemetry?**  
A: Self-hosted n8n does not send telemetry by default.

**Q: What about metadata?**  
A: All metadata stays in Qdrant (local).

**Q: How do I verify nothing leaks?**  
A: Use network monitoring tools (Wireshark, tcpdump).

---

**Recommendation**: For sensitive data, **always use Ollama** for 100% sovereignty.

**Last Updated**: January 2026
